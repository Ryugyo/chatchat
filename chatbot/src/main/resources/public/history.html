<!DOCTYPE html>
<html>
  <head>
      <!-- <meta name="viewport" content="width=device-width, initial-scale=1"> -->
      <meta name="viewport" charset="utf-8" />

      <title>ChatChat_DFI</title>
      <link rel="stylesheet" href="history.css">

  </head>
  <body onload="displayHistory()">
      <script type="text/javascript" th:inline="javascript">
        function displayHistory() {      
          var json = /*[(${history})]*/ '';
          console.log(json);
          for (i in json) {
            var name = json[i].name;
            var content = json[i].content;
            var time = json[i].formattedDate;
            if(name === "ChatChat") {
              document.getElementById('chat').insertAdjacentHTML('beforeend', '<article><b>'+name+':    </b><span>'+time+'</span><p>'+content+'</p></article>');
            } else {
              document.getElementById('chat').insertAdjacentHTML('beforeend', '<div><b>'+name+':    </b><span>'+time+'</span><p>'+content+'</p></div>');
            }
            
          }
        }
      
      </script>


    <!-- NAVIGATION BAR -->
    <div class="navBar">
      <a href="/user">Home</a>
      <div class="dropdown">
        <button class="dropdownBtn" th:text="${session.name}" value="User"></button>
        <div class="dropdownList">
          <a href="/profile">Profile</a>
          <a href="/feedback">Feedback</a>
          <a href="/home">Log Out</a>
        </div>
      </div>
      <div class="dropdown">
        <button class="dropdownBtn">Ask ChatChat</button>
        <div class="dropdownList">
          <a href="/chat_dfi">&lt;DFI&gt;</a>
          <a href="/chat_edu">&lt;Education&gt;</a>
        </div>
      </div>
    </div>
    <!-- END OF NAVIGATION BAR -->


    <div class="chatBox">
      <div id="chat">
        <!-- Built by JS -->
      </div>

    </div>

  </body>
</html>
